{% extends "base.html" %}

{% block title %}Football Analytics System - Home{% endblock %}

{% block content %}
<h1>Football Analytics System</h1>
<p style="color: var(--text-secondary); margin-bottom: 2rem;">10-Parameter Railway PostgreSQL System</p>

{% if stats %}
<div class="stats-grid">
    <div class="stat-card">
        <div class="stat-value">{{ stats.total_teams }}</div>
        <div class="stat-label">Total Teams</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ stats.total_leagues }}</div>
        <div class="stat-label">Leagues</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">{{ stats.total_records }}</div>
        <div class="stat-label">Data Records</div>
    </div>
    <div class="stat-card">
        <div class="stat-value">10</div>
        <div class="stat-label">Parameters</div>
    </div>
</div>

<div class="card">
    <h2>System Coverage</h2>
    <p style="margin-bottom: 1rem;">All parameters at 100% coverage across 98 teams</p>
    
    <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 1rem;">
        <div>
            <h3 style="margin-bottom: 1rem;">Core Parameters</h3>
            <div class="parameter-badge">ELO Score: {{ stats.elo_coverage_pct }}%</div>
            <div class="parameter-badge">Form Score: {{ stats.form_coverage_pct }}%</div>
            <div class="parameter-badge">Squad Value: {{ stats.squad_value_coverage_pct }}%</div>
            <div class="parameter-badge">Squad Depth: {{ stats.squad_depth_coverage_pct }}%</div>
            <div class="parameter-badge">Key Players: {{ stats.key_player_coverage_pct }}%</div>
        </div>
        <div>
            <h3 style="margin-bottom: 1rem;">Advanced Parameters</h3>
            <div class="parameter-badge">Motivation: {{ stats.motivation_coverage_pct }}%</div>
            <div class="parameter-badge">Tactical: {{ stats.tactical_coverage_pct }}%</div>
            <div class="parameter-badge">Offensive: {{ stats.offensive_coverage_pct }}%</div>
            <div class="parameter-badge">Defensive: {{ stats.defensive_coverage_pct }}%</div>
            <div class="parameter-badge">H2H Performance: {{ stats.h2h_coverage_pct }}%</div>
        </div>
    </div>
</div>

<div class="card">
    <h2>Quick Actions</h2>
    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <a href="/admin" class="btn">View Admin Dashboard</a>
        <a href="/compare" class="btn btn-secondary">Compare Teams</a>
        <a href="/odds" class="btn btn-secondary">Calculate Odds</a>
        <a href="/api/teams" class="btn btn-secondary">API: All Teams</a>
    </div>
</div>

<div class="card">
    <h2>API Endpoints</h2>
    <table>
        <thead>
            <tr>
                <th>Endpoint</th>
                <th>Description</th>
                <th>Method</th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td><code>/api/teams</code></td>
                <td>Get all teams organized by league</td>
                <td>GET</td>
            </tr>
            <tr>
                <td><code>/api/team/{name}</code></td>
                <td>Get complete data for a specific team</td>
                <td>GET</td>
            </tr>
            <tr>
                <td><code>/api/compare/{team1}/{team2}</code></td>
                <td>Compare two teams head-to-head</td>
                <td>GET</td>
            </tr>
            <tr>
                <td><code>/api/odds/{team1}/{team2}</code></td>
                <td>Get betting odds for a match</td>
                <td>GET</td>
            </tr>
            <tr>
                <td><code>/api/admin/stats</code></td>
                <td>Get system statistics</td>
                <td>GET</td>
            </tr>
            <tr>
                <td><code>/health</code></td>
                <td>System health check</td>
                <td>GET</td>
            </tr>
        </tbody>
    </table>
</div>
{% else %}
<div class="alert alert-error">
    <h3>Database Connection Error</h3>
    <p>Unable to connect to Railway PostgreSQL. Please check the connection string and database status.</p>
</div>
{% endif %}
{% endblock %}